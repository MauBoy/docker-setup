version: '1.0.0'

services:
    webserver:
        image: nginx:stable
        ports:
            - "80:80"
        environment:
           - NGINX_HOST: dev.local
           - NGINX_PORT: 80
           - TERM: xterm
        volumes:
            - ./services/nginx/nginx.conf:/etc/nginx/nginx.conf
            - ./services/nginx/conf.d:/etc/nginx/conf.d
        links:
            - db
            - mailfetcher

    db:
        image: percona:latest
        ports:
            - "3306:3306"
        environment:
            - MYSQL_ROOT_PASSWORD: root
            - MYSQL_DATABASE: dev
            - TERM: xterm
        volumes:
            - "./services/percona/percona-server.conf.d/mysql.cnf:/etc/mysql/percona-server.conf.d/mysql.cnf"
            - "./services/percona/percona-server.conf.d/mysql_safe.cnf:/etc/mysql/percona-server.conf.d/mysql_safe.cnf"

    mailfetcher:
        image: mailhog/mailhog:latest
        ports:
            - "1025:1025"
            - "8025:8025"
        environment:
            - MH_HOSTNAME: mail.dev.local
            - TERM: xterm